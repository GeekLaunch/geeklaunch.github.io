<!DOCTYPE html>
<html><head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <title>How to switch GitHub Pages to a new domain for free using Cloudflare - GeekLaunch</title>

    
    

    <meta name="description" content="For reasons consisting of little more than vanity, I decided to puchase the domain geeklaunch.io and port this website over to it, replacing geeklaunch.net. However, I wanted to make sure that I maintained as much of my measly SEO rankings as possible, as well as not break any of the links to geeklaunch.net that may exist around the web.
Setting the DNS records on the new domain For GitHub Pages, which is the hosting service I currently use for this website, the process for setting up a new domain to point at GitHub Pages is pretty well-documented." />
    <meta name="author" content="map[name:Jacob Lindahl twitter:sudo_build]" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to switch GitHub Pages to a new domain for free using Cloudflare" />
    <meta property="og:description" content="Using completely free serivces, set up path-preserving redirects from an old domain to a new one." />
    <meta property="og:url" content="https://geeklaunch.io/blog/how-to-switch-github-pages-to-a-new-domain-for-free-using-cloudflare/" />
    <meta property="og:image" content="https://geeklaunch.io/img/geeklaunch.png" />
    <meta property="og:site_name" content="GeekLaunch" />

    <meta name="twitter:card" content="summary" />
    
    <meta name="twitter:site" content="Geek_Launch" />
    
    
    <meta name="twitter:creator" content="sudo_build" />
    

    

    <link id="highlight-theme-light" rel="stylesheet"
        href="https://unpkg.com/@highlightjs/cdn-assets@11.6.0/styles/github.min.css">
    <link id="highlight-theme-dark" disabled rel="stylesheet"
        href="https://unpkg.com/@highlightjs/cdn-assets@11.6.0/styles/github-dark.min.css">
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.6.0/highlight.min.js"></script>
    <script src="https://unpkg.com/highlightjs-solidity@2.0.5/dist/solidity.min.js"></script>

    <link href="https://unpkg.com/@master/normal.css@1" rel="stylesheet">
    <script src="https://unpkg.com/@master/css@1"></script>
    <script src="https://unpkg.com/themes.js@0.0.10"></script>
    <script>
        (() => {
            hljs.highlightAll();

            const themes = new window.Themes();
            window.themes = themes;

            const updateSyntaxTheme = () => {
                const darkStylesheet = document.getElementById('highlight-theme-dark');
                const lightStylesheet = document.getElementById('highlight-theme-light');
                if (themes.documentTheme === 'dark') {
                    lightStylesheet.disabled = true;
                    darkStylesheet.disabled = false;
                } else {
                    lightStylesheet.disabled = false;
                    darkStylesheet.disabled = true;
                }
            };

            updateSyntaxTheme();

            themes.onChange = (theme) => {
                updateSyntaxTheme();
            };
        })();
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DMBPKLBF8X"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-DMBPKLBF8X', { 'anonymize_ip': false });
}
</script>

<style>
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 2em;
  }

  @media (min-width: 768px) {
    html {
      scroll-padding-top: 64px;
    }
  }

  .table {
    display: initial;
  }

  @keyframes highlight {
    0% {
      background-color: rgba(226, 230, 30, 0.4);
      outline: 0.2rem solid rgba(226, 230, 30, 0.4);
    }

    100% {
      background-color: unset;
      outline: 0.2rem solid transparent;
    }
  }

  :target {
    animation: highlight 1.2s forwards;
  }

</style>
<script>
  (() => {
    document.addEventListener('DOMContentLoaded', () => {

      
      const tableOfContents = document.getElementById('TableOfContents');

      if (tableOfContents) {
        const links = Array.from(tableOfContents.querySelectorAll('a[href]'));

        links.forEach(link => {
          const linkTargetId = link.getAttribute('href').split('#')[1];
          if (!linkTargetId) {
            return;
          }

          const target = document.getElementById(linkTargetId);
          if (!target) {
            return;
          }

          const anchor = document.createElement('a');
          anchor.href = '#' + linkTargetId;
          anchor.className = 'headingAnchor';
          anchor.innerText = '#';
          target.insertAdjacentElement('afterbegin', anchor);
        });
      }
    });
  })();
</script>
</head>
<body class="bg:fade-16@dark font:fade-86@dark">
    <nav id="mainNav" class="
    w:full
    fixed@sm
    bg:white/.9
    bg:fade-16/.9@dark
    z:1000
    backdrop-filter:blur(3px)
">
    <div class="
        h:full
        w:full
        max-w:1200
        mx:auto
        px:32
        d:flex
        flex-direction:column
        flex-direction:row@sm
        align-items:center
    ">
        <a href="/" class="block mr:3 p:8 filter:brightness(1.5):hover ~filter|0.1s">
            <img class="w:40" src="/img/geeklaunch.png" title="GeekLaunch" alt="GeekLaunch logo">
        </a>

        <div class="
            ml:auto@sm
            w:full
            d:flex
            flex-wrap:wrap
            justify-content:space-between
            justify-content:flex-end@sm
        ">
            
            
            
            
            <a class="
                font:semibold
                font:fade
                font:fade-10:hover
                font:fade-30.active
                font:fade-80@dark
                font:fade-96:hover@dark
                font:fade-90.active@dark
                p:12
                p:18@sm
                
            " href="/about/" title="">About</a>
            
            
            <a class="
                font:semibold
                font:fade
                font:fade-10:hover
                font:fade-30.active
                font:fade-80@dark
                font:fade-96:hover@dark
                font:fade-90.active@dark
                p:12
                p:18@sm
                
            " href="/blog/" title="">Posts</a>
            
            
            <a class="
                font:semibold
                font:fade
                font:fade-10:hover
                font:fade-30.active
                font:fade-80@dark
                font:fade-96:hover@dark
                font:fade-90.active@dark
                p:12
                p:18@sm
                
            " href="https://www.youtube.com/c/GeekLaunch?sub_confirmation=1" title="">YouTube</a>
            
            
            <a class="
                font:semibold
                font:fade
                font:fade-10:hover
                font:fade-30.active
                font:fade-80@dark
                font:fade-96:hover@dark
                font:fade-90.active@dark
                p:12
                p:18@sm
                
            " href="https://weareindy.com/app/shared/forms/634577ccb25f8365f4aa7f42/zw1Icw3aBtCI90eLSzQVkpZiigUEBLHeaNKmJobnx4kTaPYMixQM3gDZMCFDsSHC/" title="">Contact</a>
            
        </div>
    </div>
</nav>
<div class="d:flex flex:column@<=sm pt:90@sm px:24 jc:center gap:44 word-break:break-word">
        <div class="max-w:700 w:full box:content-box">
<article class="box:border-box pt:32">
    <header class="mb:32">
        <h1 class="font:40 font:extrabold">How to switch GitHub Pages to a new domain for free using Cloudflare</h1>
        
        <p class="font:18 mt:12 lh:1.4 font:semibold color:fade-30 color:fade-70@dark">Using completely free serivces, set up path-preserving redirects from an old domain to a new one.</p>
        
        <div class="mt:16 f:fade-60 text-decoration:underline_:where(a):hover">
            <p><a href="https://twitter.com/sudo_build" rel="author">Jacob Lindahl</a><span class="mx:10">&mdash;</span><a href="https://geeklaunch.io/blog/how-to-switch-github-pages-to-a-new-domain-for-free-using-cloudflare/"><time pubdate datetime="2022-12-16 00:00:00 &#43;0000 UTC" title="December 16, 2022">Dec 16, 2022</time></a></p>
        </div>
    </header>

    
    <aside>
        <details class="
            ml:12_ul
            bl:2
            bl:fade-86
            bl:fade-40@dark
            mb:24
            py:4
            pl:12
            lh:1.5
            {content:'#';pr:.3em;color:fade-70}_li::before
            {color:fade-50}_li::before@dark
            {text-underline-offset:3;font:medium;text-decoration:underline;text-decoration-color:fade-86;color:fade-40}_a
            {text-decoration-color:fade-30;color:fade-80}_a@dark
            {text-decoration-color:fade-60;color:fade-10}_a:hover
            {text-decoration-color:fade-60;color:fade-90}_a:hover@dark
        ">
            <summary class="
                cursor:pointer
                font-weight:semibold
                color:fade-40
                color:fade-80@dark
                color:fade-70::marker
                color:fade-50::marker@dark
            ">Contents</summary>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#setting-the-dns-records-on-the-new-domain">Setting the DNS records on the new domain</a></li>
    <li><a href="#updating-the-base-url-for-the-website">Updating the base URL for the website</a></li>
    <li><a href="#setting-up-seo-preserving-https-redirects">Setting up SEO-preserving, HTTPS redirects</a></li>
  </ul>
</nav>
        </details>
    </aside>
    <div class="
    {text-decoration-color:fade-60}_:where(a):hover
    {text-decoration:underline;text-decoration-color:fade-86;color:fade-40}_:where(a)
    {text-decoration-color:fade-30;color:fade-90}_:where(a)@dark
    {bl:4|solid;b:fade-84;color:fade-34}_:where(blockquote)
    {b:fade-38;color:fade-86}_:where(blockquote)@dark
    {font:90%;color:blue-20}_:where(code)
    {color:blue-86}_:where(code)@dark
    {text-decoration:1;line-through;fade-68}_:where(del)
    {text-decoration-color:red-64}_:where(del)@dark
    {text:14;p:10;20;0;width:fit;mx:auto;font:fade-56}_:where(figcaption)
    {font:fade-57}_:where(figcaption)@dark
    {font:40;font:extrabold}_:where(h1)
    {mt:.5em}_:where(h1,h2,h3)+:where(h1,h2,h3)
    {mt:2em}_:where(h1,h2,h3,h4,h5,h6)
    {mb:1em;font:32}_:where(h2)
    {font:24}_:where(h3)
    {font:20}_:where(h4)
    {font:16}_:where(h5)
    {font:14}_:where(h6)
    {font:fade-44}_:where(li)::marker
    {font:fade-68}_:where(li)::marker@dark
    {pl:.375em}_:where(li)
    {text-decoration:underline;#fce016;bg:transparent;text-decoration-color:rgb(252;224;22/.5)@dark}_:where(mark)
    {font:fade-36;font:16;line-height:1.65}_:where(p,li,details)
    {font:fade-80}_:where(p,li,details)@dark
    {my:0.125em}_:where(li>ul)
    {my:1.125em}_:where(p,pre,blockquote,figure,ul,ol,table)
    {mt:0!}>:first-child
    {width:full;border-spacing:0}_:where(table)
    {v:baseline}_:where(td)
    {pl:0}_:where(td,th):first-child
    {pr:0}_:where(td,th):last-child
    {bb:1;solid;fade-92/.06;p:6;b:fade-4/.04@dark}_:where(td,th)
    {font:fade-78;font:14;text:left;font:fade-12@dark}_:where(th)
    {font:semibold}_:where(th,a,mark,:not(pre)>code)
    {list-style-type:disc}_:where(ul)
    {pl:1.5em}_:where(ul,ol,blockquote)
    {max-width:full}_:where(video,img)
    {text-underline-offset:3}_:where(a,mark)
    {height:0.1rem;bg:fade-80;mx:40%;my:1.5rem}_:where(hr)
    {bg:fade-40}_:where(hr)@dark
    {cursor:pointer}_:where(details>summary)
    {text-decoration:none;pr:16;font:medium;color:fade-80}_.headingAnchor
    {color:fade-60}_.headingAnchor:hover
    {opacity:0;position:absolute;translateX(-100%)}_.headingAnchor@sm
    {opacity:1}_:hover>.headingAnchor
    {opacity:1}_:target>.headingAnchor
    {color:fade-50}_.headingAnchor@dark
    {color:fade-70}_.headingAnchor:hover@dark
    {border-radius:2;lh:1.5}_:where(pre>code)
"><p>For reasons consisting of little more than vanity, I decided to puchase the domain <code>geeklaunch.io</code> and port this website over to it, replacing <code>geeklaunch.net</code>. However, I wanted to make sure that I maintained as much of my measly SEO rankings as possible, as well as not break any of the links to <code>geeklaunch.net</code> that may exist around the web.</p>
<h2 id="setting-the-dns-records-on-the-new-domain">Setting the DNS records on the new domain</h2>
<p>For GitHub Pages, which is the hosting service I currently use for this website, the process for setting up a new domain to point at GitHub Pages is <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain">pretty well-documented</a>.</p>
<p>Basically, all you need to do is set up the <code>A</code> records for your domain to point at the IP addresses of your host. (<code>AAAA</code> records for IPv6.)</p>
<p>Then, be sure to actually tell GitHub that you&rsquo;ve set up the domain. Open up your repository, and under <code>Settings</code> → <code>Pages</code> → <code>Custom domain</code>, type in the domain and click &ldquo;Save.&rdquo;</p>
<p><img src="./custom-domain.png" alt="A screenshot of the &amp;ldquo;Custom domain&amp;rdquo; field in a GitHub repository&amp;rsquo;s settings"></p>
<h2 id="updating-the-base-url-for-the-website">Updating the base URL for the website</h2>
<p>I use <a href="https://gohugo.io/">the Hugo static site generator</a> to maintain this website. Depending on your website&rsquo;s configuration, you may need to update the website&rsquo;s configuration to tell it at what domain it will live:</p>
<ul>
<li><a href="https://gohugo.io/getting-started/configuration/#baseurl">Hugo: <code>baseURL</code></a></li>
<li><a href="https://mademistakes.com/mastering-jekyll/site-url-baseurl/">Jekyll: <code>baseurl</code></a></li>
</ul>
<h2 id="setting-up-seo-preserving-https-redirects">Setting up SEO-preserving, HTTPS redirects</h2>
<p>I use Namecheap as my domain registrar. They provide a simple DNS service that allows you to <a href="https://www.namecheap.com/support/knowledgebase/article.aspx/385/2237/how-to-redirect-a-url-for-a-domain/">set up redirects</a>, but unfortunately, they won&rsquo;t automatically issue an SSL certificate for your domain. GitHub Pages <em>does</em> do this automatic issuance, but only for the domain that is currently configured. If I change the domain (which is what I&rsquo;m trying to do!), the SSL certificate will be decommissioned. This means that if I simply used the redirect service provided by my registrar, the old domain would be downgraded to HTTP-only, which, in this day and age, would probably lose me quite a few SEO points.</p>
<p>Luckily, GitHub Pages isn&rsquo;t the only place I can get a free SSL certificate automatically managed for my domain. There&rsquo;s also <a href="https://www.cloudflare.com/">Cloudflare</a>.</p>
<p>Cloudflare&rsquo;s free plan is more than sufficient for our needs.</p>
<p>Once you&rsquo;ve set up your domain on Cloudflare (all you need to do is tell your domain registrar to point the domain at Cloudflare&rsquo;s nameservers), select your domain from the Cloudflare dashboard, and navigate over to the &ldquo;Page Rules&rdquo; section on the sidebar.</p>
<p><img src="./page-rules.png" alt="A screenshot of the &amp;ldquo;Page Rules&amp;rdquo; link on the Cloudflare dashboard"></p>
<p>Create a new Page Rule, and fill it in like so:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>URL</td>
<td><code>geeklaunch.net/*</code></td>
</tr>
<tr>
<td>Setting</td>
<td>Forwarding URL</td>
</tr>
<tr>
<td>Status code</td>
<td>301 - Permanent Redirect</td>
</tr>
<tr>
<td>Destination URL</td>
<td><code>https://geeklaunch.io/$1</code></td>
</tr>
</tbody>
</table>
<p>This will set up a path-preserving redirect from <code>geeklaunch.net</code> to <code>geeklaunch.io</code>. That is, <code>https://geeklaunch.net/blog/fathomable-rust-macros/</code> will be forwarded to <code>https://geeklaunch.io/blog/fathomable-rust-macros/</code>. Since it&rsquo;s a <a href="https://en.wikipedia.org/wiki/HTTP_301">301 redirect</a>, SEO ranking will be passed over to the new URL.</p>
<p>You can find more details in the <a href="https://support.cloudflare.com/hc/en-us/articles/4729826525965-Configuring-URL-forwarding-or-redirects-with-Page-Rules#h_53Wv490V4xQG351E96JIAA">Cloudflare documentation for Page Rules</a>.</p>
</div>
</article>
<footer class="py:24 f:fade-50 f:fade-60@dark f:14 d:flex flex:col gap:8"><p>
        This work is licensed under <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.
    </p><p>&copy; Copyright 2022 Jacob Lindahl</p>
    <p class="
        d:flex
        {p:5}_a
        {w:18;fill:fade-50}_svg
        {fill:fade-60}_svg@dark
        {fill:fade-10}_a:hover_svg
        {fill:fade-90}_a:hover_svg@dark
    "><a href="https://youtube.com/GeekLaunch" title="YouTube"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
<span class="sr-only">YouTube channel</span>
        </a><a href="https://twitter.com/Geek_Launch" title="Twitter"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
<span class="sr-only">Twitter profile</span>
        </a><a rel="me" href="https://techhub.social/@geeklaunch" title="Mastodon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Mastodon</title><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/></svg>
<span class="sr-only">Mastodon profile</span>
        </a></p>
</footer>
</div>
    </div>
</body>

</html>
