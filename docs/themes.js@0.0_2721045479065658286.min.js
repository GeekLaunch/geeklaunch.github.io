(()=>{var s,e="(prefers-color-scheme: dark)",n=t=>{t||(t=window.matchMedia(e));const n=t.matches,s=n?"dark":"light";return s},t=class{constructor(e){this._theme=null,this._sync=!1,this.documentTheme="",this.storageKey="theme",typeof e=="string"?this.theme=e||null:(this.theme=e?.theme||null,this.storageKey=e?.storageKey||this.storageKey,this.sync=e?.sync||!1)}loadTheme(){try{return localStorage.getItem(this.storageKey)}catch{}return null}observeStorage(){if(this.removeStorageListenerFunc!==void 0)return;const e=e=>{if(e.key!==this.storageKey)return;this.setTheme(e.newValue)};window.addEventListener("storage",e),this.removeStorageListenerFunc=()=>{window.removeEventListener("storage",e)},this.setTheme(this.loadTheme())}observe(){if(this.removeMediaListenerFunc!==void 0)return;const t=window.matchMedia(e),n=this.handleMediaQuery.bind(this);try{t.addEventListener("change",n),this.removeMediaListenerFunc=()=>{t.removeEventListener("change",n)}}catch{try{t.addListener(n),this.removeMediaListenerFunc=()=>{t.removeListener(n)}}catch(e){console.error(e)}}this.handleMediaQuery(t)}handleMediaQuery(e){const t=n(e);this.applyTheme(t)}applyTheme(e){if(e!==this.documentTheme){const t=document.documentElement;t.classList.contains(this.documentTheme)&&t.classList.remove(this.documentTheme),t.classList.add(e),this.documentTheme=e}this.onChange&&this.onChange(e)}setTheme(e){this._theme=e,!e||e==="auto"?this.observe():(this.removeMediaListenerFunc!==void 0&&(this.removeMediaListenerFunc(),delete this.removeMediaListenerFunc),this.applyTheme(e))}get theme(){return this._theme}set theme(e){this._theme=e,this.sync=!e,this.setTheme(e)}get sync(){return this._sync}set sync(e){if(this._sync===e)return;this._sync=e,e?this.observeStorage():this.removeStorageListenerFunc&&(this.removeStorageListenerFunc(),delete this.removeStorageListenerFunc)}commit(e=!0){try{this.theme?localStorage.setItem(this.storageKey,this.theme):localStorage.removeItem(this.storageKey)}catch{}this.sync=e}};typeof window!="undefined"&&(window.Themes=t),s=t})()